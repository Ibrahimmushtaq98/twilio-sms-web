(this["webpackJsonptwilio-sms-web"]=this["webpackJsonptwilio-sms-web"]||[]).push([[0],{44:function(e,t,n){},48:function(e,t,n){},68:function(e,t,n){},77:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(15),s=n.n(o),r=(n(44),n(45),n(46),n(47),n(48),n(19)),i=n(4),u=n(3),l=n(1),d=a.a.createContext({}),b=a.a.createContext((function(){})),j=function(){return[Object(c.useContext)(d),Object(c.useContext)(b)]},m=function(e){var t=e.children,n=Object(c.useState)({}),a=Object(u.a)(n,2),o=a[0],s=a[1];return Object(l.jsx)(d.Provider,{value:o,children:Object(l.jsx)(b.Provider,{value:function(e){return s(e)},children:t})})},h=n(11),f=n.n(h),O=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,c=e.onError,a=void 0===c?function(){}:c,o=e.onComplete,s=void 0===o?function(){}:o;return function(e){var t=e.accountSid,c=e.authToken,o="https://api.twilio.com/2010-04-01/Accounts/".concat(t,".json");f.a.get(o,{auth:{username:t,password:c}}).then((function(e){return n(e)})).catch((function(e){return a(e)})).then((function(){return s()}))}},p=function(e){var t=e.type,n=void 0===t?"text":t,a=e.name,o=void 0===a?"":a,s=e.value,r=void 0===s?"":s,i=e.placeholder,d=void 0===i?"Placeholder":i,b=e.label,j=void 0===b?"Label":b,m=e.validation,h=void 0===m?function(){}:m,f=e.invalidHint,O=void 0===f?"Invalid value":f,p=e.isRequired,x=void 0!==p&&p,v=e.isEnabled,g=void 0===v||v,S=e.onChange,N=void 0===S?function(){}:S,y=Object(c.useState)(!0),C=Object(u.a)(y,2),w=C[0],T=C[1],k=function(){try{return null!==h(r)}catch(e){return!1}},E="form-label ".concat(w||k()?"":"has-error"),A=!w&&!k();return Object(l.jsxs)("label",{className:E,children:[j,":",x&&Object(l.jsx)("sup",{className:"text-error",children:"\u2217 "}),Object(l.jsx)("input",{type:n,name:o,className:"form-input",placeholder:d,required:x,value:r,disabled:!g,onChange:function(e){return N(e.target.value)},onBlur:function(){return T(!1)}}),A&&Object(l.jsx)("span",{className:"form-input-hint",children:O}),!A&&Object(l.jsx)("span",{className:"form-input-hint",children:d})]})},x=function(e){var t=e.accountSid,n=void 0===t?"":t,c=e.authToken,a=void 0===c?"":c,o=e.loading,s=void 0===o||o,r=e.onAccountSidChange,i=void 0===r?function(){}:r,u=e.onAuthTokenChange,d=void 0===u?function(){}:u,b=e.onSubmit,j=void 0===b?function(){}:b;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("form",{onSubmit:j,children:[Object(l.jsx)(p,{type:"text",name:"AccountSid",label:"Account SID",value:n,placeholder:"Enter your Twilio 'Account SID' located at your Twilio Console",isEnabled:!s,onChange:i}),Object(l.jsx)(p,{type:"password",name:"AuthToken",label:"Auth Token",placeholder:"Enter your Twilio 'Auth Token' located in your Twilio Console",value:a,isEnabled:!s,onChange:d}),Object(l.jsx)("div",{className:"text-center m-2",children:Object(l.jsx)("button",{className:"btn btn-primary ".concat(s?"loading":""),type:"submit",children:"Authenticate"})})]})})},v=function(e){var t=e.accountInfo,n=void 0===t?"":t;return 0===Object.keys(n).length?null:Object(l.jsx)("div",{className:"flex-centered",style:{marginTop:"2em"},children:Object(l.jsxs)("div",{className:"card",children:[Object(l.jsx)("div",{className:"card-header bg-success text-center",children:Object(l.jsx)("h6",{children:"Authentication Success"})}),Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("p",{className:"text-small",style:{marginBottom:".5em"},children:"You are authenticated with the following account:"}),Object(l.jsx)("span",{className:"text-bold",children:"Name: "}),n.name,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Type: "}),n.type,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Status: "}),n.status,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Created: "}),n.dateCreated,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Updated: "}),n.dateUpdated,Object(l.jsx)("br",{})]})]})})},g=n(96),S=(n(68),function(e){var t=e.children,n=Object(i.f)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"default-layout-container container grid-lg",children:Object(l.jsxs)("header",{className:"navbar bg-primary",style:{padding:".5em"},children:[Object(l.jsxs)("section",{className:"navbar-section",children:[Object(l.jsx)("span",{className:"btn btn-link text-light",onClick:function(){n.push("/authentication")},children:"Authentication"}),Object(l.jsx)("span",{className:"btn btn-link text-light",onClick:function(){n.push("/phone-numbers")},children:"Messages"})]}),Object(l.jsx)("section",{className:"navbar-center hide-xs",children:Object(l.jsx)("span",{className:"h5",children:"Twilio SMS Web"})}),Object(l.jsx)("section",{className:"navbar-section",children:Object(l.jsxs)("a",{className:"btn btn-link text-light",href:"https://github.com/rafasantos/twilio-sms-web",target:"_blank",rel:"noreferrer",children:["GitHub ",Object(l.jsx)(g.a,{})]})})]})}),Object(l.jsx)("div",{className:"default-layout-container container grid-lg text-left",style:{marginTop:"1em"},children:t})]})}),N=function(e){var t=e.error;return t?Object(l.jsx)("span",{className:"label label-error",style:{padding:".5em",margin:".5em 0em .5em 0em"},children:t instanceof Error?"".concat(t.name,": ").concat(t.message):"Error: ".concat(String(t))}):null},y=function(){var e=j(),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(n.accountInfo),s=Object(u.a)(o,2),r=s[0],i=s[1],d=Object(c.useState)(n.accountSid),b=Object(u.a)(d,2),m=b[0],h=b[1],f=Object(c.useState)(n.authToken),p=Object(u.a)(f,2),g=p[0],y=p[1],C=Object(c.useState)(!1),w=Object(u.a)(C,2),T=w[0],k=w[1],E=Object(c.useState)(null),A=Object(u.a)(E,2),D=A[0],F=A[1],I=O({onSuccess:function(e){var t={name:e.data.friendly_name,type:e.data.type,status:e.data.status,dateCreated:e.data.date_created,dateUpdated:e.data.date_updated};i(t),a({accountSid:m,authToken:g,accountInfo:t})},onError:function(e){F(e)},onComplete:function(){k(!1)}});return Object(l.jsxs)(S,{children:[Object(l.jsx)("h4",{children:"Authentication"}),Object(l.jsx)(N,{error:D}),Object(l.jsx)(x,{accountSid:m,authToken:g,loading:T,onAccountSidChange:function(e){return h(e)},onAuthTokenChange:function(e){return y(e)},onSubmit:function(e){e.preventDefault(),k(!0),I({accountSid:m,authToken:g})}}),Object(l.jsx)(v,{accountInfo:r})]})},C=(n(77),n(26)),w=n.n(C),T=n(38),k=function(){var e=j(),t=Object(u.a)(e,1)[0];return function(){var e=Object(T.a)(w.a.mark((function e(n){var c,a,o,s,r,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.phoneNumber,a="https://api.twilio.com/2010-04-01/Accounts/".concat(t.accountSid,"/Messages.json"),o=[],e.next=5,f.a.get(a,{auth:{username:t.accountSid,password:t.authToken},params:{From:c}});case 5:return s=e.sent,e.next=8,f.a.get(a,{auth:{username:t.accountSid,password:t.authToken},params:{To:c}});case 8:return r=e.sent,o=o.concat(s.data.messages).concat(r.data.messages),i=function(e,t){return Date.parse(e.date_created)>Date.parse(t.date_created)?-1:1},e.abrupt("return",o.sort(i));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=n(97),A=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"text-center message-list-loading-container",children:Object(l.jsx)(E.a,{className:"message-list-loading text-primary"})})})},D=n(98),F=n(99),I=(n(79),function(e){return e.includes("inbound")?"inbound":"outbound"}),P=function(e){return"message-card-label text-code text-small ".concat(I(e))},M=function(e){return"inbound"===I(e)?180:0},_={padding:"0",margin:"0"},L=function(e){var t=new Date(e);return"".concat(t.toDateString()," ").concat(t.toLocaleTimeString())},B=function(e){var t=e.txt;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"tooltip message-card-copy-btn","data-tooltip":"Copy to clipboard",onClick:function(){return e=t,void navigator.clipboard.writeText(e).then((function(){return console.log("msg copied")})).catch((function(){return console.log("meh")}));var e},children:Object(l.jsx)(D.a,{twoToneColor:"#5755d9",style:_})})})},q=function(e){var t=e.messageSid,n=void 0===t?"":t,c=e.direction,a=void 0===c?"":c,o=e.from,s=void 0===o?"":o,r=e.to,i=void 0===r?"":r,u=e.date,d=void 0===u?new Date:u,b=e.status,j=void 0===b?"":b,m=e.body,h=void 0===m?"":m;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"message-card",children:[Object(l.jsx)("div",{className:P(a),children:Object(l.jsx)(F.a,{rotate:M(a)})}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"message-card-header text-tiny",children:[Object(l.jsxs)("span",{children:[Object(l.jsx)(B,{txt:s}),Object(l.jsx)("strong",{children:"From:"})," ",s]}),Object(l.jsxs)("span",{children:[Object(l.jsx)(B,{txt:i}),Object(l.jsx)("strong",{children:"To:"})," ",i]}),Object(l.jsxs)("span",{className:"message-card-header-status",children:[Object(l.jsx)("strong",{children:"Status:"})," ",j]}),Object(l.jsxs)("span",{children:[Object(l.jsx)("strong",{children:"Direction:"})," ",a]})]}),Object(l.jsx)("div",{className:"message-card-body text-code text-small",children:h}),Object(l.jsxs)("div",{className:"message-card-footer text-tiny",children:[Object(l.jsx)("strong",{children:"Date: "}),L(d),Object(l.jsxs)("span",{children:[Object(l.jsx)("strong",{children:"MessageSid: "}),n]})]})]})]})})},H=function(e){var t=e.phoneNumber,n=void 0===t?"":t,a=e.onComplete,o=void 0===a?function(){}:a,s=e.onError,r=void 0===s?function(){}:s,i=Object(c.useState)(!0),d=Object(u.a)(i,2),b=d[0],j=d[1],m=Object(c.useState)([]),h=Object(u.a)(m,2),f=h[0],O=h[1],p=Object(c.useState)(!1),x=Object(u.a)(p,2),v=x[0],g=x[1],S=Object(c.useState)(null),N=Object(u.a)(S,2),y=N[0],C=N[1],w=Object(c.useCallback)((function(e){var t=e.map((function(e){return{messageSid:e.sid,direction:e.direction,from:e.from,to:e.to,date:e.date_created,status:e.status,body:e.body}}));O(t),j(!1)}),[O,j]),T=k({onSuccess:w,onComplete:o,onError:r});return Object(c.useEffect)((function(){g(!0)}),[g]),Object(c.useEffect)((function(){v&&(null===n||void 0===n?void 0:n.length)>0&&y!==n&&(T({phoneNumber:n}).then(w).catch(r).then(o),C(n),j(!0))}),[v,n,y,T,f,w,r,o,C,j]),b?Object(l.jsx)(A,{}):f.map((function(e){return Object(l.jsx)(q,{messageSid:e.messageSid,from:e.from,to:e.to,body:e.body,direction:e.direction,status:e.status,date:e.date},e.messageSid)}))},R=(n(80),function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,c=e.onError,a=void 0===c?function(){}:c,o=e.onComplete,s=void 0===o?function(){}:o,r=j(),i=Object(u.a)(r,1)[0];return function(e){var t=e.to,c=e.from,o=e.body,r=new URLSearchParams;r.append("To",t),r.append("From",c),r.append("Body",o);var u="https://api.twilio.com/2010-04-01/Accounts/".concat(i.accountSid,"/Messages.json");f.a.post(u,r,{auth:{username:i.accountSid,password:i.authToken},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return n(e)})).catch((function(e){return a(e)})).then((function(){return s()}))}}),U=function(e){var t=e.text;return null!==t&&t.length>0?Object(l.jsx)("span",{className:"label label-success",style:{padding:".5em",margin:".5em 0em .5em 0em"},children:t}):null},J=function(e){var t=e.name,n=void 0===t?"":t,a=e.value,o=void 0===a?"":a,s=e.placeholder,r=void 0===s?"Placeholder":s,i=e.label,d=void 0===i?"Label":i,b=e.validation,j=void 0===b?function(){}:b,m=e.invalidHint,h=void 0===m?"Invalid value":m,f=e.isRequired,O=void 0!==f&&f,p=e.isEnabled,x=void 0===p||p,v=e.rows,g=void 0===v?3:v,S=e.onChange,N=void 0===S?function(){}:S,y=Object(c.useState)(!0),C=Object(u.a)(y,2),w=C[0],T=C[1],k=function(){try{return null!==j(o)}catch(e){return!1}},E="form-label ".concat(w||k()?"":"has-error"),A=!w&&!k();return Object(l.jsxs)("label",{className:E,children:[d,":",O&&Object(l.jsx)("sup",{className:"text-error",children:"\u2217 "}),Object(l.jsx)("textarea",{className:"form-input",name:n,placeholder:r,required:O,value:o,rows:g,disabled:!x,onChange:function(e){return N(e.target.value)},onBlur:function(){return T(!1)}}),A&&Object(l.jsx)("span",{className:"form-input-hint",children:h}),!A&&Object(l.jsx)("span",{className:"form-input-hint",children:r})]})},G=function(e){var t=e.phoneNumber,n=void 0===t?"":t,a=Object(c.useState)(!1),o=Object(u.a)(a,2),s=o[0],r=o[1],i=Object(c.useState)(""),d=Object(u.a)(i,2),b=d[0],j=d[1],m=Object(c.useState)(!1),h=Object(u.a)(m,2),f=h[0],O=h[1],x=Object(c.useState)(""),v=Object(u.a)(x,2),g=v[0],S=v[1],y=Object(c.useState)(""),C=Object(u.a)(y,2),w=C[0],T=C[1],k=R({onSuccess:function(e){O(!0),setTimeout((function(){return O(!1)}),5e3)},onError:function(e){j(e)},onComplete:function(){r(!1)}});return Object(l.jsxs)("div",{children:[Object(l.jsx)(N,{error:b}),Object(l.jsxs)("form",{className:"form-group",onSubmit:function(e){e.preventDefault(),r(!0),k({to:g,from:n,body:w})},children:[Object(l.jsxs)("fieldset",{disabled:s,children:[Object(l.jsx)(p,{label:"To",type:"tel",value:g,onChange:function(e){e.length>0&&(e="+"+e.replace(/\D/g,"")),e.length<13&&S(e)},validation:function(e){return e.match("^\\+\\d{11}")},placeholder:"Recipient's phone number",invalidHint:"Phone number is invalid, it must contain the country code followed by 10 digits",isRequired:!0}),Object(l.jsx)(J,{label:"Message",value:w,isRequired:!0,placeholder:"Enter the message to sent to: ".concat(g," from: ").concat(n),validHint:"This message is going to be sent to: ".concat(g," from: ").concat(n),invalidHint:"Invalid message, it must be between 3 and 200 characters",rows:"3",validation:function(e){return e.match("[\\w\\d]{3,}")},onChange:function(e){e.length<200&&T(e)}})]}),Object(l.jsx)("div",{className:"text-center m-2",children:Object(l.jsx)("button",{className:"message-composer-submit btn btn-primary ".concat(s?"loading":""),type:"submit",children:"Send"})})]}),Object(l.jsx)("div",{className:"text-center",children:f&&Object(l.jsx)(U,{text:"Message sent successfully."})})]})},W=function(e){var t=e.phoneNumber,n=void 0===t?"":t,a=Object(c.useState)("messages"),o=Object(u.a)(a,2),s=o[0],r=o[1],i="messages"===s,d="composer"===s,b="tab-item messages-page-tabs-area ".concat(i?"active":""),j="tab-item messages-page-tabs-area ".concat(d?"active":"");return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"messages-page-tabs-container",children:Object(l.jsx)("div",{className:"messages-page-tabs-content",children:Object(l.jsxs)("ul",{className:"tab tab-block",children:[Object(l.jsx)("li",{className:b,onClick:function(){return r("messages")},children:"Messages"}),Object(l.jsx)("li",{className:j,onClick:function(){return r("composer")},children:"Composer"})]})})}),i&&Object(l.jsx)(H,{phoneNumber:n}),d&&Object(l.jsx)(G,{phoneNumber:n})]})},Y=n(39),z=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,c=e.onError,a=void 0===c?function(){}:c,o=e.onComplete,s=void 0===o?function(){}:o,r=j(),i=Object(u.a)(r,1)[0];return function(){var e="https://api.twilio.com/2010-04-01/Accounts/".concat(i.accountSid,"/IncomingPhoneNumbers.json?Beta=false");f.a.get(e,{auth:{username:i.accountSid,password:i.authToken}}).then((function(e){return n(e)})).catch((function(e){return a(e)})).then((function(){return s()}))}},K=(n(81),function(e){var t=e.onError,n=void 0===t?function(){}:t,a=e.onComplete,o=void 0===a?function(){}:a,s=e.onPhoneNumberChange,r=void 0===s?function(){}:s,i=Object(c.useState)(!0),d=Object(u.a)(i,2),b=d[0],j=d[1],m=Object(c.useState)([]),h=Object(u.a)(m,2),f=h[0],O=h[1],p=z({onSuccess:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.incoming_phone_numbers.filter((function(e){return e.capabilities.sms})).map((function(e){return e.phone_number})).sort();O(n)},onError:n,onComplete:function(){j(!1),o()}}),x=function(e){var t=e.substr(0,2);return t+=" "+e.substr(2,3),t+=" "+e.substr(5,3),t+=" "+e.substr(8)},v=f.map((function(e){return{value:e,label:x(e)}})),g=b?"Loading phone numbers...":"Select (or type) a phone number...";return Object(c.useEffect)((function(){0===f.length&&p()}),[p,f]),Object(l.jsx)(Y.a,{placeholder:g,isLoading:b,options:v,onChange:function(e){r(e.value)}})}),Q=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),r=s[0],d=s[1],b=j(),m=Object(u.a)(b,1)[0],h=Object(i.f)();if(!(null===m||void 0===m?void 0:m.accountSid))return h.push("/authentication"),null;var f=""!==r;return Object(l.jsxs)(S,{children:[Object(l.jsx)("h4",{children:"Messages"}),Object(l.jsx)(N,{error:n}),Object(l.jsx)(K,{onError:function(e){return a(e)},onPhoneNumberChange:function(e){return d(e)}}),f&&Object(l.jsx)(W,{phoneNumber:r})]})},V=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(m,{children:Object(l.jsx)(r.a,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",component:y}),Object(l.jsx)(i.a,{path:"/authentication",component:y}),Object(l.jsx)(i.a,{path:"/phone-numbers",component:Q})]})})})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(V,{})}),document.getElementById("root")),X()}},[[94,1,2]]]);
//# sourceMappingURL=main.4725d519.chunk.js.map