(this["webpackJsonptwilio-sms-web"]=this["webpackJsonptwilio-sms-web"]||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(27),s=n.n(o),r=(n(34),n(35),n(12)),i=n(3),u=n(2),l=n(0),d=a.a.createContext({}),j=a.a.createContext((function(){})),b=function(){return[Object(c.useContext)(d),Object(c.useContext)(j)]},h=function(e){var t=e.children,n=Object(c.useState)({}),a=Object(u.a)(n,2),o=a[0],s=a[1];return Object(l.jsx)(d.Provider,{value:o,children:Object(l.jsx)(j.Provider,{value:function(e){return s(e)},children:t})})},m=n(10),O=n.n(m),f=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,c=e.onError,a=void 0===c?function(){}:c,o=e.onComplete,s=void 0===o?function(){}:o;return function(e){var t=e.accountSid,c=e.authToken,o="https://api.twilio.com/2010-04-01/Accounts/".concat(t,".json");O.a.get(o,{auth:{username:t,password:c}}).then((function(e){return n(e)})).catch((function(e){return a(e)})).then((function(){return s()}))}},x=function(e){var t=e.error;return t?Object(l.jsx)("span",{className:"label label-error",style:{padding:".5em",margin:".5em 0em .5em 0em"},children:t instanceof Error?"".concat(t.name,": ").concat(t.message):"Error: ".concat(String(t))}):null},v=n(71),p=function(e){var t=e.children,n=Object(i.f)();return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"container grid-lg",children:Object(l.jsxs)("header",{className:"navbar bg-primary",style:{padding:".5em"},children:[Object(l.jsxs)("section",{className:"navbar-section",children:[Object(l.jsx)("span",{className:"btn btn-link text-light",onClick:function(){n.push("/authentication")},children:"Authentication"}),Object(l.jsx)("span",{className:"btn btn-link text-light",onClick:function(){n.push("/phone-numbers")},children:"Messages"})]}),Object(l.jsx)("section",{className:"navbar-center",children:Object(l.jsx)("span",{className:"h5",children:"Twilio SMS Web"})}),Object(l.jsx)("section",{className:"navbar-section",children:Object(l.jsxs)("a",{className:"btn btn-link text-light",href:"https://github.com/rafasantos/twilio-sms-web",target:"_blank",rel:"noreferrer",children:["GitHub ",Object(l.jsx)(v.a,{})]})})]})}),Object(l.jsx)("div",{className:"container grid-lg text-left",style:{marginTop:"1em"},children:t})]})},g=function(e){var t=e.accountInfo,n=void 0===t?{}:t,c=e.accountSid,a=void 0===c?"":c,o=e.authToken,s=void 0===o?"":o,r=e.error,i=void 0===r?null:r,u=e.loading,d=void 0!==u&&u,j=e.onAccountSidChange,b=void 0===j?function(){}:j,h=e.onAuthTokenChange,m=void 0===h?function(){}:h,O=e.onSubmit,f=void 0===O?function(){}:O,v=function(){return 0===Object.keys(n).length?null:Object(l.jsx)("div",{className:"flex-centered",style:{marginTop:"2em"},children:Object(l.jsxs)("div",{className:"card",children:[Object(l.jsx)("div",{className:"card-header bg-success text-center",children:Object(l.jsx)("h6",{children:"Authentication Success"})}),Object(l.jsxs)("div",{className:"card-body",children:[Object(l.jsx)("p",{className:"text-small",style:{marginBottom:".5em"},children:"You are authenticated with the following account:"}),Object(l.jsx)("span",{className:"text-bold",children:"Name: "}),n.name,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Type: "}),n.type,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Status: "}),n.status,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Created: "}),n.dateCreated,Object(l.jsx)("br",{}),Object(l.jsx)("span",{className:"text-bold",children:"Updated: "}),n.dateUpdated,Object(l.jsx)("br",{})]})]})})},g=d?"loading":"";return Object(l.jsxs)(p,{children:[Object(l.jsx)("h4",{children:"Authentication"}),Object(l.jsx)(x,{error:i}),Object(l.jsxs)("form",{onSubmit:f,children:[Object(l.jsxs)("label",{className:"form-label",children:["Account SID",Object(l.jsx)("input",{className:"form-input",type:"text",name:"AccountSid",value:a,onChange:function(e){return b(e.target.value)},disabled:d,placeholder:"See Twilio console 'Account SID' "})]}),Object(l.jsxs)("label",{className:"form-label",children:["Auth Token",Object(l.jsx)("input",{className:"form-input",type:"password",name:"AuthToken",value:s,onChange:function(e){return m(e.target.value)},disabled:d,placeholder:"See Twilio console 'Auth Token'"})]}),Object(l.jsx)("div",{className:"text-center m-2",children:Object(l.jsx)("button",{className:"btn btn-primary ".concat(g),type:"submit",children:"Authenticate"})})]}),Object(l.jsx)(v,{})]})},N=function(){var e=b(),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(n.accountInfo),s=Object(u.a)(o,2),r=s[0],i=s[1],d=Object(c.useState)(n.accountSid),j=Object(u.a)(d,2),h=j[0],m=j[1],O=Object(c.useState)(n.authToken),x=Object(u.a)(O,2),v=x[0],p=x[1],N=Object(c.useState)(!1),S=Object(u.a)(N,2),C=S[0],y=S[1],k=Object(c.useState)(null),T=Object(u.a)(k,2),w=T[0],A=T[1],E=f({onSuccess:function(e){var t={name:e.data.friendly_name,type:e.data.type,status:e.data.status,dateCreated:e.data.date_created,dateUpdated:e.data.date_updated};i(t),a({accountSid:h,authToken:v,accountInfo:t})},onError:function(e){A(e)},onComplete:function(){y(!1)}});return Object(l.jsx)(g,{accountInfo:r,accountSid:h,authToken:v,error:w,loading:C,onAccountSidChange:function(e){return m(e)},onAuthTokenChange:function(e){return p(e)},onSubmit:function(e){e.preventDefault(),y(!0),E({accountSid:h,authToken:v})}})},S=(n(63),n(72)),C=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,c=e.onError,a=void 0===c?function(){}:c,o=e.onComplete,s=void 0===o?function(){}:o,r=b(),i=Object(u.a)(r,1)[0];return function(){var e="https://api.twilio.com/2010-04-01/Accounts/".concat(i.accountSid,"/IncomingPhoneNumbers.json?Beta=false");O.a.get(e,{auth:{username:i.accountSid,password:i.authToken}}).then((function(e){return n(e)})).catch((function(e){return a(e)})).then((function(){return s()}))}},y=(n(64),function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"text-center loading-phone-number-container",children:Object(l.jsx)(S.a,{className:"text-primary loading-phone-number"})})})}),k=function(e){var t=e.onError,n=void 0===t?function(){}:t,a=e.onComplete,o=void 0===a?function(){}:a,s=e.onPhoneNumberChange,r=void 0===s?function(){}:s,i=Object(c.useState)(!0),d=Object(u.a)(i,2),j=d[0],b=d[1],h=Object(c.useState)(""),m=Object(u.a)(h,2),O=m[0],f=m[1],x=Object(c.useState)([]),v=Object(u.a)(x,2),p=v[0],g=v[1],N=function(e){f(e.target.value),r(e.target.value)},S=C({onSuccess:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.incoming_phone_numbers.filter((function(e){return e.capabilities.sms})).map((function(e){return e.phone_number})).sort();g(n)},onError:n,onComplete:function(){b(!1),o()}});Object(c.useEffect)((function(){0===p.length&&S()}),[S,p]);var k=function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"phone-number-container",children:[Object(l.jsx)("div",{className:"text-center phone-number-label",children:"Phone numbers:"}),Object(l.jsx)("div",{className:"form-group",children:Object(l.jsxs)("div",{children:[Object(l.jsxs)("select",{className:"form-select phone-number-select",size:"5",value:O,onChange:N,children:[Object(l.jsx)("option",{value:"",hidden:!0,children:"Select a phone number"}),p.map((function(e){return Object(l.jsx)("option",{children:e},e)}))]}),Object(l.jsxs)("div",{className:"text-small text-center",children:["Total: ",p.length]})]})})]})})};return Object(l.jsxs)(l.Fragment,{children:[j&&Object(l.jsx)(y,{}),!j&&Object(l.jsx)(k,{})]})},T=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,c=e.onError,a=void 0===c?function(){}:c,o=e.onComplete,s=void 0===o?function(){}:o,r=b(),i=Object(u.a)(r,1)[0];return function(e){var t=e.from,c="https://api.twilio.com/2010-04-01/Accounts/".concat(i.accountSid,"/Messages.json");O.a.get(c,{auth:{username:i.accountSid,password:i.authToken},params:{From:t}}).then((function(e){return n(e)})).catch((function(e){return a(e)})).then((function(){return s()}))}},w=(n(65),function(){return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"text-center message-list-loading-container",children:Object(l.jsx)(S.a,{className:"message-list-loading text-primary"})})})}),A=function(e){var t=e.fromPhoneNumber,n=void 0===t?null:t,a=e.onComplete,o=void 0===a?function(){}:a,s=e.onError,r=void 0===s?function(){}:s,i=Object(c.useState)(!0),d=Object(u.a)(i,2),j=d[0],b=d[1],h=Object(c.useState)([]),m=Object(u.a)(h,2),O=m[0],f=m[1],x=Object(c.useState)(!1),v=Object(u.a)(x,2),p=v[0],g=v[1],N=Object(c.useState)(null),S=Object(u.a)(N,2),C=S[0],y=S[1],k=T({onSuccess:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.messages.map((function(e){return{messageSid:e.sid,direction:e.direction,from:e.from,to:e.to,date:e.date_created,status:e.status,body:e.body}}));f(n),b(!1)},onComplete:o,onError:r});Object(c.useEffect)((function(){g(!0)}),[g]),Object(c.useEffect)((function(){p&&(null===n||void 0===n?void 0:n.length)>0&&C!==n&&(k({from:n}),y(n),b(!0))}),[O,p,k,C,n,b]);var A=function(e){var t,n=e.message;return Object(l.jsxs)("div",{className:"panel message-list-panel",children:[Object(l.jsx)("div",{className:"panel-header text-small",children:Object(l.jsxs)("div",{className:"message-list-header",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"from:"})," ",n.from]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"To:"})," ",n.to]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"Direction:"})," ",n.direction]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("strong",{children:"Status:"})," ",n.status]})]})}),Object(l.jsx)("div",{className:"panel-body text-code",children:n.body}),Object(l.jsxs)("div",{className:"panel-footer text-small text-gray",children:["Date: ",null===(t=new Date(n.date))||void 0===t?void 0:t.toLocaleString()]})]})};return j?Object(l.jsx)(w,{}):O.map((function(e){return Object(l.jsx)(A,{message:e},e.messageSid)}))},E=function(){return Object(l.jsx)("div",{className:"middle-tabs",children:Object(l.jsx)("div",{className:"middle-tabs-content",children:Object(l.jsxs)("ul",{className:"tab tab-block",children:[Object(l.jsx)("li",{className:"tab-item",children:Object(l.jsx)("a",{href:"#/phone-numbers",className:"active",children:"Messages"})}),Object(l.jsx)("li",{className:"tab-item",children:Object(l.jsx)("a",{href:"#/phone-numbers",className:"",children:"Compose"})})]})})})},P=function(e){var t=e.fromPhoneNumber,n=void 0===t?"":t,c=e.loadingPhoneNumbers,a=void 0===c||c,o=e.error,s=void 0===o?null:o,r=e.onError,i=void 0===r?function(){}:r,u=e.onPhoneNumberChange,d=void 0===u?function(){}:u;return Object(l.jsxs)(p,{children:[Object(l.jsx)("h4",{children:"Messages"}),Object(l.jsx)(x,{error:s}),Object(l.jsx)(k,{onError:i,onPhoneNumberChange:d}),!a&&Object(l.jsx)(E,{}),!a&&Object(l.jsx)(A,{fromPhoneNumber:n})]})},F=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),r=s[0],d=s[1],j=b(),h=Object(u.a)(j,1)[0],m=Object(i.f)();return(null===h||void 0===h?void 0:h.accountSid)?Object(l.jsx)(P,{error:n,fromPhoneNumber:r,loadingPhoneNumbers:0===r.length,onError:function(e){return a(e)},onPhoneNumberChange:function(e){return d(e)}}):(m.push("/authentication"),null)},I=(n(66),n(67),n(68),function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(h,{children:Object(l.jsx)(r.a,{children:Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",component:N}),Object(l.jsx)(i.a,{path:"/authentication",component:N}),Object(l.jsx)(i.a,{path:"/phone-numbers",component:F})]})})})})}),_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,73)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(I,{})}),document.getElementById("root")),_()}},[[69,1,2]]]);
//# sourceMappingURL=main.c76bb074.chunk.js.map